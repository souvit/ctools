{"ast":null,"code":"import { required, email, minLength } from '@vuelidate/validators';\nimport useVuelidate from '@vuelidate/core';\nimport ServerError from 'presentation/components/ServerError/ServerError.vue';\n// import LoadingButton from '../../common/form/LoadingButton/LoadingButton.vue';\nimport BaseInput from 'presentation/components/BaseInput/BaseInput.vue';\nimport BaseForm from 'presentation/components/BaseForm/BaseForm.vue';\nimport { ref } from 'vue';\nimport { useI18n } from 'vue-i18n';\nimport translation from './SignUpForm.json';\nimport useCustomerTools from 'hooks/useCustomerTools';\nfunction Rules(form) {\n  this.firstName = {\n    required\n  };\n  this.lastName = {\n    required\n  };\n  this.email = {\n    required,\n    email\n  };\n  this.password = {\n    required,\n    minLength: minLength(5)\n  };\n  this.repeatPassword = {\n    sameAsPassword: value => value === form.value.password\n  };\n  this.agreeToTerms = {\n    required,\n    mustBeAgreed: value => value === true\n  };\n}\nexport default {\n  components: {\n    ServerError,\n    BaseInput,\n    BaseForm\n  },\n  props: {},\n  setup() {\n    const {\n      t\n    } = useI18n({\n      messages: translation\n    });\n    const form = ref({\n      firstName: '',\n      lastName: '',\n      email: '',\n      password: '',\n      repeatPassword: '',\n      agreeToTerms: true\n    });\n    const rules = new Rules(form);\n    const v = useVuelidate(rules, form);\n    const tools = useCustomerTools();\n    const customerSignMeUp = () => tools.signup(form.value);\n    const getErrorMessage = ({\n      code,\n      field\n    }) => {\n      if (code === 'DuplicateField' && field === 'email') {\n        return t('duplicatedEmail');\n      }\n      return t('unknownError');\n    };\n    const change = (key, val) => {\n      form.value = {\n        ...form.value,\n        [key]: val\n      };\n    };\n    return {\n      change,\n      t,\n      v,\n      customerSignMeUp,\n      getErrorMessage\n    };\n  }\n};","map":{"version":3,"names":["required","email","minLength","useVuelidate","ServerError","BaseInput","BaseForm","ref","useI18n","translation","useCustomerTools","Rules","form","firstName","lastName","password","repeatPassword","sameAsPassword","value","agreeToTerms","mustBeAgreed","components","props","setup","t","messages","rules","v","tools","customerSignMeUp","signup","getErrorMessage","code","field","change","key","val"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/src/presentation/fashion/Login/SignUpForm/SignUpForm.js"],"sourcesContent":["import {\r\n  required,\r\n  email,\r\n  minLength,\r\n} from '@vuelidate/validators';\r\nimport useVuelidate from '@vuelidate/core';\r\nimport ServerError from 'presentation/components/ServerError/ServerError.vue';\r\n// import LoadingButton from '../../common/form/LoadingButton/LoadingButton.vue';\r\nimport BaseInput from 'presentation/components/BaseInput/BaseInput.vue';\r\nimport BaseForm from 'presentation/components/BaseForm/BaseForm.vue';\r\n\r\nimport { ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\nimport translation from './SignUpForm.json'\r\nimport useCustomerTools from 'hooks/useCustomerTools';\r\n\r\n\r\nfunction Rules(form) {\r\n  this.firstName = { required };\r\n  this.lastName = { required };\r\n  this.email = { required, email };\r\n  this.password = { required, minLength: minLength(5) };\r\n  this.repeatPassword = {\r\n    sameAsPassword: (value) =>\r\n      value === form.value.password,\r\n  };\r\n  this.agreeToTerms = {\r\n    required,\r\n    mustBeAgreed: (value) => value === true,\r\n  };\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    ServerError,\r\n    BaseInput,\r\n    BaseForm,\r\n  },\r\n  props: {},\r\n  setup() {\r\n    const { t } = useI18n({\r\n      messages: translation\r\n    });\r\n    const form = ref({\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      password: '',\r\n      repeatPassword: '',\r\n      agreeToTerms: true,\r\n    });\r\n    const rules = new Rules(form);\r\n    const v = useVuelidate(rules, form);\r\n    const tools = useCustomerTools();\r\n    const customerSignMeUp = () => tools.signup(form.value);\r\n\r\n    const getErrorMessage = ({ code, field }) => {\r\n      if (code === 'DuplicateField' && field === 'email') {\r\n        return t('duplicatedEmail');\r\n      }\r\n      return t('unknownError');\r\n    };\r\n    const change = (key, val) => {\r\n      form.value = { ...form.value, [key]: val };\r\n    };\r\n    return {\r\n      change,\r\n      t,\r\n      v,\r\n      customerSignMeUp,\r\n      getErrorMessage,\r\n    };\r\n  },\r\n};\r\n"],"mappings":"AAAA,SACEA,QAAQ,EACRC,KAAK,EACLC,SAAS,QACJ,uBAAuB;AAC9B,OAAOC,YAAY,MAAM,iBAAiB;AAC1C,OAAOC,WAAW,MAAM,qDAAqD;AAC7E;AACA,OAAOC,SAAS,MAAM,iDAAiD;AACvE,OAAOC,QAAQ,MAAM,+CAA+C;AAEpE,SAASC,GAAG,QAAQ,KAAK;AACzB,SAASC,OAAO,QAAQ,UAAU;AAClC,OAAOC,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,gBAAgB,MAAM,wBAAwB;AAGrD,SAASC,KAAK,CAACC,IAAI,EAAE;EACnB,IAAI,CAACC,SAAS,GAAG;IAAEb;EAAS,CAAC;EAC7B,IAAI,CAACc,QAAQ,GAAG;IAAEd;EAAS,CAAC;EAC5B,IAAI,CAACC,KAAK,GAAG;IAAED,QAAQ;IAAEC;EAAM,CAAC;EAChC,IAAI,CAACc,QAAQ,GAAG;IAAEf,QAAQ;IAAEE,SAAS,EAAEA,SAAS,CAAC,CAAC;EAAE,CAAC;EACrD,IAAI,CAACc,cAAc,GAAG;IACpBC,cAAc,EAAGC,KAAK,IACpBA,KAAK,KAAKN,IAAI,CAACM,KAAK,CAACH;EACzB,CAAC;EACD,IAAI,CAACI,YAAY,GAAG;IAClBnB,QAAQ;IACRoB,YAAY,EAAGF,KAAK,IAAKA,KAAK,KAAK;EACrC,CAAC;AACH;AAEA,eAAe;EACbG,UAAU,EAAE;IACVjB,WAAW;IACXC,SAAS;IACTC;EACF,CAAC;EACDgB,KAAK,EAAE,CAAC,CAAC;EACTC,KAAK,GAAG;IACN,MAAM;MAAEC;IAAE,CAAC,GAAGhB,OAAO,CAAC;MACpBiB,QAAQ,EAAEhB;IACZ,CAAC,CAAC;IACF,MAAMG,IAAI,GAAGL,GAAG,CAAC;MACfM,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZb,KAAK,EAAE,EAAE;MACTc,QAAQ,EAAE,EAAE;MACZC,cAAc,EAAE,EAAE;MAClBG,YAAY,EAAE;IAChB,CAAC,CAAC;IACF,MAAMO,KAAK,GAAG,IAAIf,KAAK,CAACC,IAAI,CAAC;IAC7B,MAAMe,CAAC,GAAGxB,YAAY,CAACuB,KAAK,EAAEd,IAAI,CAAC;IACnC,MAAMgB,KAAK,GAAGlB,gBAAgB,EAAE;IAChC,MAAMmB,gBAAgB,GAAG,MAAMD,KAAK,CAACE,MAAM,CAAClB,IAAI,CAACM,KAAK,CAAC;IAEvD,MAAMa,eAAe,GAAG,CAAC;MAAEC,IAAI;MAAEC;IAAM,CAAC,KAAK;MAC3C,IAAID,IAAI,KAAK,gBAAgB,IAAIC,KAAK,KAAK,OAAO,EAAE;QAClD,OAAOT,CAAC,CAAC,iBAAiB,CAAC;MAC7B;MACA,OAAOA,CAAC,CAAC,cAAc,CAAC;IAC1B,CAAC;IACD,MAAMU,MAAM,GAAG,CAACC,GAAG,EAAEC,GAAG,KAAK;MAC3BxB,IAAI,CAACM,KAAK,GAAG;QAAE,GAAGN,IAAI,CAACM,KAAK;QAAE,CAACiB,GAAG,GAAGC;MAAI,CAAC;IAC5C,CAAC;IACD,OAAO;MACLF,MAAM;MACNV,CAAC;MACDG,CAAC;MACDE,gBAAgB;MAChBE;IACF,CAAC;EACH;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}