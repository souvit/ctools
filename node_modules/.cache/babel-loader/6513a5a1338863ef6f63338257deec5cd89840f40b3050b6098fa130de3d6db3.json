{"ast":null,"code":"//group promise returning function\nexport const createGroup = cache => (fn, getKey = (...x) => JSON.stringify(x)) => (...args) => {\n  const key = getKey(args);\n  let result = cache.get(key);\n  if (result) {\n    return result;\n  }\n  //no cache\n  result = Promise.resolve(fn.apply(null, args)).then(r => {\n    cache.resolved(key); //tell cache promise is done\n    return r;\n  }, e => {\n    cache.resolved(key); //tell cache promise is done\n    return Promise.reject(e);\n  });\n  cache.set(key, result);\n  return result;\n};\nexport const createPromiseSessionCache = (cache = new Map()) => {\n  return {\n    get: key => cache.get(key),\n    set: (key, value) => cache.set(key, value),\n    resolved: key => cache.delete(key)\n  };\n};","map":{"version":3,"names":["createGroup","cache","fn","getKey","x","JSON","stringify","args","key","result","get","Promise","resolve","apply","then","r","resolved","e","reject","set","createPromiseSessionCache","Map","value","delete"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/src/apollo/group.js"],"sourcesContent":["//group promise returning function\r\nexport const createGroup =\r\n  (cache) =>\r\n  (fn, getKey = (...x) => JSON.stringify(x)) =>\r\n  (...args) => {\r\n    const key = getKey(args);\r\n    let result = cache.get(key);\r\n    if (result) {\r\n      return result;\r\n    }\r\n    //no cache\r\n    result = Promise.resolve(fn.apply(null, args)).then(\r\n      (r) => {\r\n        cache.resolved(key); //tell cache promise is done\r\n        return r;\r\n      },\r\n      (e) => {\r\n        cache.resolved(key); //tell cache promise is done\r\n        return Promise.reject(e);\r\n      }\r\n    );\r\n    cache.set(key, result);\r\n    return result;\r\n  };\r\nexport const createPromiseSessionCache = (\r\n  cache = new Map()\r\n) => {\r\n  return {\r\n    get: (key) => cache.get(key),\r\n    set: (key, value) => cache.set(key, value),\r\n    resolved: (key) => cache.delete(key),\r\n  };\r\n};\r\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,WAAW,GACrBC,KAAK,IACN,CAACC,EAAE,EAAEC,MAAM,GAAG,CAAC,GAAGC,CAAC,KAAKC,IAAI,CAACC,SAAS,CAACF,CAAC,CAAC,KACzC,CAAC,GAAGG,IAAI,KAAK;EACX,MAAMC,GAAG,GAAGL,MAAM,CAACI,IAAI,CAAC;EACxB,IAAIE,MAAM,GAAGR,KAAK,CAACS,GAAG,CAACF,GAAG,CAAC;EAC3B,IAAIC,MAAM,EAAE;IACV,OAAOA,MAAM;EACf;EACA;EACAA,MAAM,GAAGE,OAAO,CAACC,OAAO,CAACV,EAAE,CAACW,KAAK,CAAC,IAAI,EAAEN,IAAI,CAAC,CAAC,CAACO,IAAI,CAChDC,CAAC,IAAK;IACLd,KAAK,CAACe,QAAQ,CAACR,GAAG,CAAC,CAAC,CAAC;IACrB,OAAOO,CAAC;EACV,CAAC,EACAE,CAAC,IAAK;IACLhB,KAAK,CAACe,QAAQ,CAACR,GAAG,CAAC,CAAC,CAAC;IACrB,OAAOG,OAAO,CAACO,MAAM,CAACD,CAAC,CAAC;EAC1B,CAAC,CACF;EACDhB,KAAK,CAACkB,GAAG,CAACX,GAAG,EAAEC,MAAM,CAAC;EACtB,OAAOA,MAAM;AACf,CAAC;AACH,OAAO,MAAMW,yBAAyB,GAAG,CACvCnB,KAAK,GAAG,IAAIoB,GAAG,EAAE,KACd;EACH,OAAO;IACLX,GAAG,EAAGF,GAAG,IAAKP,KAAK,CAACS,GAAG,CAACF,GAAG,CAAC;IAC5BW,GAAG,EAAE,CAACX,GAAG,EAAEc,KAAK,KAAKrB,KAAK,CAACkB,GAAG,CAACX,GAAG,EAAEc,KAAK,CAAC;IAC1CN,QAAQ,EAAGR,GAAG,IAAKP,KAAK,CAACsB,MAAM,CAACf,GAAG;EACrC,CAAC;AACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}