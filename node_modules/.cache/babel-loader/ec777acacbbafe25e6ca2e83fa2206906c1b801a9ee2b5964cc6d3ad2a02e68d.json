{"ast":null,"code":"import { useCartActions } from 'hooks/useCartMutation';\nimport config from '../sunrise.config';\nimport useCart from './useCart';\nfunction subTotal(cartLike) {\n  const {\n    currencyCode,\n    fractionDigits\n  } = cartLike.totalPrice;\n  const priceCentAmount = cartLike.lineItems.reduce((acc, li) => acc + li.quantity * li.price.value.centAmount, 0);\n  const totalPriceCentAmount = cartLike.lineItems.reduce((acc, li) => acc + li.totalPrice.centAmount, 0);\n  const discounted = priceCentAmount === totalPriceCentAmount ? {} : {\n    discounted: {\n      value: {\n        centAmount: totalPriceCentAmount,\n        currencyCode,\n        fractionDigits\n      }\n    }\n  };\n  return {\n    value: {\n      centAmount: priceCentAmount,\n      currencyCode,\n      fractionDigits\n    },\n    ...discounted\n  };\n}\nconst cartNotEmpty = cart => Boolean(cart && Boolean(cart?.lineItems?.length));\nconst total = lineItem => {\n  if (lineItem.price.discounted) {\n    return {\n      value: {\n        ...lineItem.price.value,\n        centAmount: lineItem.price.value.centAmount * lineItem.quantity\n      },\n      discounted: {\n        value: lineItem.totalPrice\n      }\n    };\n  }\n  return {\n    value: lineItem.totalPrice\n  };\n};\nconst lineItemAttr = lineItem => {\n  const attributes = lineItem.variant.attributesRaw.filter(({\n    name\n  }) => config.variantInProductName.includes(name)).map(({\n    attributeDefinition,\n    value\n  }) => [attributeDefinition.label, value]);\n  return attributes.join(', ');\n};\nconst productRoute = lineItem => {\n  return {\n    name: 'product',\n    params: {\n      sku: lineItem.variant.sku,\n      productSlug: lineItem.productSlug\n    }\n  };\n};\nconst displayedImageUrl = variant => {\n  return variant?.images?.[0]?.url;\n};\nconst taxes = cart => {\n  const {\n    taxedPrice\n  } = cart;\n  if (taxedPrice) {\n    return {\n      value: {\n        centAmount: taxedPrice.totalGross.centAmount - taxedPrice.totalNet.centAmount,\n        currencyCode: taxedPrice.totalGross.currencyCode,\n        fractionDigits: taxedPrice.totalGross.fractionDigits\n      }\n    };\n  }\n  return null;\n};\nconst discountCodesExist = cart => {\n  return Boolean(cart.discountCodes?.length);\n};\nfunction useCartTools() {\n  const cartActions = useCartActions();\n  const cartTools = {\n    ...cartActions,\n    cartNotEmpty,\n    total,\n    lineItemAttr,\n    productRoute,\n    displayedImageUrl,\n    subTotal,\n    taxes,\n    discountCodesExist,\n    useCart\n  };\n  return cartTools;\n}\nexport default useCartTools;","map":{"version":3,"names":["useCartActions","config","useCart","subTotal","cartLike","currencyCode","fractionDigits","totalPrice","priceCentAmount","lineItems","reduce","acc","li","quantity","price","value","centAmount","totalPriceCentAmount","discounted","cartNotEmpty","cart","Boolean","length","total","lineItem","lineItemAttr","attributes","variant","attributesRaw","filter","name","variantInProductName","includes","map","attributeDefinition","label","join","productRoute","params","sku","productSlug","displayedImageUrl","images","url","taxes","taxedPrice","totalGross","totalNet","discountCodesExist","discountCodes","useCartTools","cartActions","cartTools"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/composition/useCartTools.js"],"sourcesContent":["import { useCartActions } from 'hooks/useCartMutation';\r\nimport config from '../sunrise.config';\r\nimport useCart from './useCart';\r\n\r\nfunction subTotal(cartLike) {\r\n  const { currencyCode, fractionDigits } =\r\n    cartLike.totalPrice;\r\n  const priceCentAmount = cartLike.lineItems.reduce(\r\n    (acc, li) =>\r\n      acc + li.quantity * li.price.value.centAmount,\r\n    0\r\n  );\r\n  const totalPriceCentAmount = cartLike.lineItems.reduce(\r\n    (acc, li) => acc + li.totalPrice.centAmount,\r\n    0\r\n  );\r\n  const discounted =\r\n    priceCentAmount === totalPriceCentAmount\r\n      ? {}\r\n      : {\r\n          discounted: {\r\n            value: {\r\n              centAmount: totalPriceCentAmount,\r\n              currencyCode,\r\n              fractionDigits,\r\n            },\r\n          },\r\n        };\r\n  return {\r\n    value: {\r\n      centAmount: priceCentAmount,\r\n      currencyCode,\r\n      fractionDigits,\r\n    },\r\n    ...discounted,\r\n  };\r\n}\r\nconst cartNotEmpty = (cart) =>\r\n  Boolean(cart && Boolean(cart?.lineItems?.length));\r\n\r\nconst total = (lineItem) => {\r\n  if (lineItem.price.discounted) {\r\n    return {\r\n      value: {\r\n        ...lineItem.price.value,\r\n        centAmount:\r\n          lineItem.price.value.centAmount *\r\n          lineItem.quantity,\r\n      },\r\n      discounted: {\r\n        value: lineItem.totalPrice,\r\n      },\r\n    };\r\n  }\r\n  return { value: lineItem.totalPrice };\r\n};\r\nconst lineItemAttr = (lineItem) => {\r\n  const attributes = lineItem.variant.attributesRaw\r\n    .filter(({ name }) =>\r\n      config.variantInProductName.includes(name)\r\n    )\r\n    .map(({ attributeDefinition, value }) => [\r\n      attributeDefinition.label,\r\n      value,\r\n    ]);\r\n  return attributes.join(', ');\r\n};\r\n\r\nconst productRoute = (lineItem) => {\r\n  return {\r\n    name: 'product',\r\n    params: {\r\n      sku: lineItem.variant.sku,\r\n      productSlug: lineItem.productSlug,\r\n    },\r\n  };\r\n};\r\nconst displayedImageUrl = (variant) => {\r\n  return variant?.images?.[0]?.url;\r\n};\r\nconst taxes = (cart) => {\r\n  const { taxedPrice } = cart;\r\n  if (taxedPrice) {\r\n    return {\r\n      value: {\r\n        centAmount:\r\n          taxedPrice.totalGross.centAmount -\r\n          taxedPrice.totalNet.centAmount,\r\n        currencyCode: taxedPrice.totalGross.currencyCode,\r\n        fractionDigits:\r\n          taxedPrice.totalGross.fractionDigits,\r\n      },\r\n    };\r\n  }\r\n  return null;\r\n};\r\nconst discountCodesExist = (cart) => {\r\n  return Boolean(cart.discountCodes?.length);\r\n};\r\n\r\nfunction useCartTools() {\r\n  const cartActions = useCartActions();\r\n  const cartTools = {\r\n    ...cartActions,\r\n    cartNotEmpty,\r\n    total,\r\n    lineItemAttr,\r\n    productRoute,\r\n    displayedImageUrl,\r\n    subTotal,\r\n    taxes,\r\n    discountCodesExist,\r\n    useCart,\r\n  };\r\n  return cartTools;\r\n}\r\nexport default useCartTools;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}