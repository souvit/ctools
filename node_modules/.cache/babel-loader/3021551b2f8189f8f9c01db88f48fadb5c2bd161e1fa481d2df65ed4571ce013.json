{"ast":null,"code":"import { ApolloClient, createHttpLink, InMemoryCache, defaultDataIdFromObject } from '@apollo/client/core';\nimport config from '../../sunrise.config';\nimport fetch from './auth';\nexport const cache = new InMemoryCache({\n  //getting default id is broken\n  dataIdFromObject(responseObject) {\n    // if (responseObject?.scopedPrice?.country) {\n    //   console.log('variable:', responseObject.scopedPrice);\n    //   console.log(\n    //     'key:',\n    //     defaultDataIdFromObject(responseObject)\n    //   );\n    //   // return `${defaultDataIdFromObject(\n    //   //   responseObject\n    //   // )}:${JSON.stringify(responseObject.scopedPrice)}`;\n    // }\n    if (responseObject.__typename === 'Me') {\n      //both orders and active cart are identified as \"Me\" this breaks\n      //  apollo cache\n      return 'activeCart' in responseObject ? 'activeCart' : 'orders';\n    }\n    return defaultDataIdFromObject(responseObject);\n  }\n});\nconst httpLink = createHttpLink({\n  uri: `${config.ct.api}/${config.ct.auth.projectKey}/graphql`,\n  fetch\n});\nexport const apolloClient = new ApolloClient({\n  cache,\n  link: httpLink\n});","map":{"version":3,"names":["ApolloClient","createHttpLink","InMemoryCache","defaultDataIdFromObject","config","fetch","cache","dataIdFromObject","responseObject","__typename","httpLink","uri","ct","api","auth","projectKey","apolloClient","link"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/src/apollo/index.js"],"sourcesContent":["import {\r\n  ApolloClient,\r\n  createHttpLink,\r\n  InMemoryCache,\r\n  defaultDataIdFromObject,\r\n} from '@apollo/client/core';\r\nimport config from '../../sunrise.config';\r\nimport fetch from './auth';\r\nexport const cache = new InMemoryCache({\r\n  //getting default id is broken\r\n  dataIdFromObject(responseObject) {\r\n    // if (responseObject?.scopedPrice?.country) {\r\n    //   console.log('variable:', responseObject.scopedPrice);\r\n    //   console.log(\r\n    //     'key:',\r\n    //     defaultDataIdFromObject(responseObject)\r\n    //   );\r\n    //   // return `${defaultDataIdFromObject(\r\n    //   //   responseObject\r\n    //   // )}:${JSON.stringify(responseObject.scopedPrice)}`;\r\n    // }\r\n    if (responseObject.__typename === 'Me') {\r\n      //both orders and active cart are identified as \"Me\" this breaks\r\n      //  apollo cache\r\n      return 'activeCart' in responseObject\r\n        ? 'activeCart'\r\n        : 'orders';\r\n    }\r\n    return defaultDataIdFromObject(responseObject);\r\n  },\r\n});\r\nconst httpLink = createHttpLink({\r\n  uri: `${config.ct.api}/${config.ct.auth.projectKey}/graphql`,\r\n  fetch,\r\n});\r\nexport const apolloClient = new ApolloClient({\r\n  cache,\r\n  link: httpLink,\r\n});\r\n"],"mappings":"AAAA,SACEA,YAAY,EACZC,cAAc,EACdC,aAAa,EACbC,uBAAuB,QAClB,qBAAqB;AAC5B,OAAOC,MAAM,MAAM,sBAAsB;AACzC,OAAOC,KAAK,MAAM,QAAQ;AAC1B,OAAO,MAAMC,KAAK,GAAG,IAAIJ,aAAa,CAAC;EACrC;EACAK,gBAAgB,CAACC,cAAc,EAAE;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,IAAIA,cAAc,CAACC,UAAU,KAAK,IAAI,EAAE;MACtC;MACA;MACA,OAAO,YAAY,IAAID,cAAc,GACjC,YAAY,GACZ,QAAQ;IACd;IACA,OAAOL,uBAAuB,CAACK,cAAc,CAAC;EAChD;AACF,CAAC,CAAC;AACF,MAAME,QAAQ,GAAGT,cAAc,CAAC;EAC9BU,GAAG,EAAG,GAAEP,MAAM,CAACQ,EAAE,CAACC,GAAI,IAAGT,MAAM,CAACQ,EAAE,CAACE,IAAI,CAACC,UAAW,UAAS;EAC5DV;AACF,CAAC,CAAC;AACF,OAAO,MAAMW,YAAY,GAAG,IAAIhB,YAAY,CAAC;EAC3CM,KAAK;EACLW,IAAI,EAAEP;AACR,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}