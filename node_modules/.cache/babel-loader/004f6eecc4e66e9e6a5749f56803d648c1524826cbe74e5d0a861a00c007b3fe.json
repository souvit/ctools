{"ast":null,"code":"export const createReactive = (initial, setter) => {\n  const ref = {};\n  ref.value = initial;\n  let listeners = new Map();\n  const addListener = fn => {\n    listeners.set(fn, fn);\n    return () => listeners.delete(fn);\n  };\n  const setValue = newValue => {\n    setter(newValue);\n    ref.value = newValue;\n    listeners.forEach(listener => listener(newValue));\n  };\n  return {\n    ref,\n    setValue,\n    addListener\n  };\n};\nexport const addVisibilityChangeListener = (() => {\n  const checkStatus = () => {\n    let hidden;\n    if (typeof document.hidden !== 'undefined') {\n      // Opera 12.10 and Firefox 18 and later support\n      hidden = 'hidden';\n    } else if (typeof document['msHidden'] !== 'undefined') {\n      hidden = 'msHidden';\n    } else if (typeof document['webkitHidden'] !== 'undefined') {\n      hidden = 'webkitHidden';\n    }\n    return !document[hidden];\n  };\n  let visibilityChange;\n  if (typeof document.hidden !== 'undefined') {\n    // Opera 12.10 and Firefox 18 and later support\n    visibilityChange = 'visibilitychange';\n  } else if (typeof document['msHidden'] !== 'undefined') {\n    visibilityChange = 'msvisibilitychange';\n  } else if (typeof document['webkitHidden'] !== 'undefined') {\n    visibilityChange = 'webkitvisibilitychange';\n  }\n  const handlers = new Map();\n  const handler = () => {\n    const status = checkStatus();\n    handlers.forEach(handler => handler(status));\n  };\n  document.addEventListener(visibilityChange, handler, false);\n  return handleVisibilityChange => {\n    handlers.set(handleVisibilityChange, handleVisibilityChange);\n    return () => handlers.delete(handleVisibilityChange);\n  };\n})();\nexport default addVisibilityChangeListener;","map":{"version":3,"names":["createReactive","initial","setter","ref","value","listeners","Map","addListener","fn","set","delete","setValue","newValue","forEach","listener","addVisibilityChangeListener","checkStatus","hidden","document","visibilityChange","handlers","handler","status","addEventListener","handleVisibilityChange"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/composition/lib.js"],"sourcesContent":["export const createReactive = (initial, setter) => {\r\n  const ref = {};\r\n  ref.value = initial;\r\n  let listeners = new Map();\r\n  const addListener = (fn) => {\r\n    listeners.set(fn, fn);\r\n    return () => listeners.delete(fn);\r\n  };\r\n  const setValue = (newValue) => {\r\n    setter(newValue);\r\n    ref.value = newValue;\r\n    listeners.forEach((listener) => listener(newValue));\r\n  };\r\n  return {\r\n    ref,\r\n    setValue,\r\n    addListener,\r\n  };\r\n};\r\nexport const addVisibilityChangeListener = (() => {\r\n  const checkStatus = () => {\r\n    let hidden;\r\n    if (typeof document.hidden !== 'undefined') {\r\n      // Opera 12.10 and Firefox 18 and later support\r\n      hidden = 'hidden';\r\n    } else if (\r\n      typeof document['msHidden'] !== 'undefined'\r\n    ) {\r\n      hidden = 'msHidden';\r\n    } else if (\r\n      typeof document['webkitHidden'] !== 'undefined'\r\n    ) {\r\n      hidden = 'webkitHidden';\r\n    }\r\n    return !document[hidden];\r\n  };\r\n  let visibilityChange;\r\n  if (typeof document.hidden !== 'undefined') {\r\n    // Opera 12.10 and Firefox 18 and later support\r\n    visibilityChange = 'visibilitychange';\r\n  } else if (typeof document['msHidden'] !== 'undefined') {\r\n    visibilityChange = 'msvisibilitychange';\r\n  } else if (\r\n    typeof document['webkitHidden'] !== 'undefined'\r\n  ) {\r\n    visibilityChange = 'webkitvisibilitychange';\r\n  }\r\n  const handlers = new Map();\r\n  const handler = () => {\r\n    const status = checkStatus();\r\n    handlers.forEach((handler) => handler(status));\r\n  };\r\n  document.addEventListener(\r\n    visibilityChange,\r\n    handler,\r\n    false\r\n  );\r\n  return (handleVisibilityChange) => {\r\n    handlers.set(\r\n      handleVisibilityChange,\r\n      handleVisibilityChange\r\n    );\r\n    return () => handlers.delete(handleVisibilityChange);\r\n  };\r\n})();\r\nexport default addVisibilityChangeListener;\r\n"],"mappings":"AAAA,OAAO,MAAMA,cAAc,GAAG,CAACC,OAAO,EAAEC,MAAM,KAAK;EACjD,MAAMC,GAAG,GAAG,CAAC,CAAC;EACdA,GAAG,CAACC,KAAK,GAAGH,OAAO;EACnB,IAAII,SAAS,GAAG,IAAIC,GAAG,EAAE;EACzB,MAAMC,WAAW,GAAIC,EAAE,IAAK;IAC1BH,SAAS,CAACI,GAAG,CAACD,EAAE,EAAEA,EAAE,CAAC;IACrB,OAAO,MAAMH,SAAS,CAACK,MAAM,CAACF,EAAE,CAAC;EACnC,CAAC;EACD,MAAMG,QAAQ,GAAIC,QAAQ,IAAK;IAC7BV,MAAM,CAACU,QAAQ,CAAC;IAChBT,GAAG,CAACC,KAAK,GAAGQ,QAAQ;IACpBP,SAAS,CAACQ,OAAO,CAAEC,QAAQ,IAAKA,QAAQ,CAACF,QAAQ,CAAC,CAAC;EACrD,CAAC;EACD,OAAO;IACLT,GAAG;IACHQ,QAAQ;IACRJ;EACF,CAAC;AACH,CAAC;AACD,OAAO,MAAMQ,2BAA2B,GAAG,CAAC,MAAM;EAChD,MAAMC,WAAW,GAAG,MAAM;IACxB,IAAIC,MAAM;IACV,IAAI,OAAOC,QAAQ,CAACD,MAAM,KAAK,WAAW,EAAE;MAC1C;MACAA,MAAM,GAAG,QAAQ;IACnB,CAAC,MAAM,IACL,OAAOC,QAAQ,CAAC,UAAU,CAAC,KAAK,WAAW,EAC3C;MACAD,MAAM,GAAG,UAAU;IACrB,CAAC,MAAM,IACL,OAAOC,QAAQ,CAAC,cAAc,CAAC,KAAK,WAAW,EAC/C;MACAD,MAAM,GAAG,cAAc;IACzB;IACA,OAAO,CAACC,QAAQ,CAACD,MAAM,CAAC;EAC1B,CAAC;EACD,IAAIE,gBAAgB;EACpB,IAAI,OAAOD,QAAQ,CAACD,MAAM,KAAK,WAAW,EAAE;IAC1C;IACAE,gBAAgB,GAAG,kBAAkB;EACvC,CAAC,MAAM,IAAI,OAAOD,QAAQ,CAAC,UAAU,CAAC,KAAK,WAAW,EAAE;IACtDC,gBAAgB,GAAG,oBAAoB;EACzC,CAAC,MAAM,IACL,OAAOD,QAAQ,CAAC,cAAc,CAAC,KAAK,WAAW,EAC/C;IACAC,gBAAgB,GAAG,wBAAwB;EAC7C;EACA,MAAMC,QAAQ,GAAG,IAAId,GAAG,EAAE;EAC1B,MAAMe,OAAO,GAAG,MAAM;IACpB,MAAMC,MAAM,GAAGN,WAAW,EAAE;IAC5BI,QAAQ,CAACP,OAAO,CAAEQ,OAAO,IAAKA,OAAO,CAACC,MAAM,CAAC,CAAC;EAChD,CAAC;EACDJ,QAAQ,CAACK,gBAAgB,CACvBJ,gBAAgB,EAChBE,OAAO,EACP,KAAK,CACN;EACD,OAAQG,sBAAsB,IAAK;IACjCJ,QAAQ,CAACX,GAAG,CACVe,sBAAsB,EACtBA,sBAAsB,CACvB;IACD,OAAO,MAAMJ,QAAQ,CAACV,MAAM,CAACc,sBAAsB,CAAC;EACtD,CAAC;AACH,CAAC,GAAG;AACJ,eAAeT,2BAA2B"},"metadata":{},"sourceType":"module","externalDependencies":[]}