{"ast":null,"code":"import { computed } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\nimport useProducts from './useProducts';\nfunction useProductTools(expand = false) {\n  const route = useRoute();\n  const router = useRouter();\n  const sku = computed(() => route.params.sku);\n  const {\n    products,\n    total,\n    loading,\n    error,\n    categoryError\n  } = useProducts({\n    sku,\n    expand: expand ? {\n      variants: true\n    } : {}\n  });\n  const product = computed(() => products.value?.[0]);\n  const allVariants = computed(() => product.value ? [product.value.masterVariant].concat(product.value.variants || []).map(p => ({\n    name: product.value.name,\n    slug: product.value.slug,\n    ...p\n  })) : null);\n  const currentVariant = computed(() => allVariants.value ? allVariants.value.find(({\n    sku: c\n  }) => sku.value === c) : null);\n  const setPage = page => router.push({\n    ...route,\n    params: {\n      ...route.params,\n      page\n    }\n  });\n  const page = computed(() => Number(route.params.page || 1));\n  const formatProduct = product => ({\n    ...product,\n    ...product.masterVariant\n  });\n  const allError = computed(() => error.value || categoryError.value);\n  return {\n    total,\n    products,\n    loading,\n    error: allError,\n    allVariants,\n    sku,\n    currentVariant,\n    setPage,\n    formatProduct,\n    page\n  };\n}\nexport default useProductTools;","map":{"version":3,"names":["computed","useRoute","useRouter","useProducts","useProductTools","expand","route","router","sku","params","products","total","loading","error","categoryError","variants","product","value","allVariants","masterVariant","concat","map","p","name","slug","currentVariant","find","c","setPage","page","push","Number","formatProduct","allError"],"sources":["/Users/souvitroy/Downloads/commercetools/ctools/composition/useProductTools.js"],"sourcesContent":["import { computed } from 'vue';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport useProducts from './useProducts';\r\n\r\nfunction useProductTools(expand = false) {\r\n  const route = useRoute();\r\n  const router = useRouter();\r\n  const sku = computed(() => route.params.sku);\r\n  const { products, total, loading, error, categoryError } =\r\n    useProducts({\r\n      sku,\r\n      expand: expand ? { variants: true } : {},\r\n    });\r\n  const product = computed(() => products.value?.[0]);\r\n  const allVariants = computed(() =>\r\n    product.value\r\n      ? [product.value.masterVariant]\r\n          .concat(product.value.variants || [])\r\n          .map((p) => ({\r\n            name: product.value.name,\r\n            slug: product.value.slug,\r\n            ...p,\r\n          }))\r\n      : null\r\n  );\r\n  const currentVariant = computed(() =>\r\n    allVariants.value\r\n      ? allVariants.value.find(\r\n          ({ sku: c }) => sku.value === c\r\n        )\r\n      : null\r\n  );\r\n\r\n  const setPage = (page) =>\r\n    router.push({\r\n      ...route,\r\n      params: {\r\n        ...route.params,\r\n        page,\r\n      },\r\n    });\r\n  const page = computed(() =>\r\n    Number(route.params.page || 1)\r\n  );\r\n  const formatProduct = (product) => ({\r\n    ...product,\r\n    ...product.masterVariant,\r\n  });\r\n  const allError = computed(\r\n    () => error.value || categoryError.value\r\n  );\r\n  return {\r\n    total,\r\n    products,\r\n    loading,\r\n    error: allError,\r\n    allVariants,\r\n    sku,\r\n    currentVariant,\r\n    setPage,\r\n    formatProduct,\r\n    page,\r\n  };\r\n}\r\nexport default useProductTools;\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,KAAK;AAC9B,SAASC,QAAQ,EAAEC,SAAS,QAAQ,YAAY;AAChD,OAAOC,WAAW,MAAM,eAAe;AAEvC,SAASC,eAAe,CAACC,MAAM,GAAG,KAAK,EAAE;EACvC,MAAMC,KAAK,GAAGL,QAAQ,EAAE;EACxB,MAAMM,MAAM,GAAGL,SAAS,EAAE;EAC1B,MAAMM,GAAG,GAAGR,QAAQ,CAAC,MAAMM,KAAK,CAACG,MAAM,CAACD,GAAG,CAAC;EAC5C,MAAM;IAAEE,QAAQ;IAAEC,KAAK;IAAEC,OAAO;IAAEC,KAAK;IAAEC;EAAc,CAAC,GACtDX,WAAW,CAAC;IACVK,GAAG;IACHH,MAAM,EAAEA,MAAM,GAAG;MAAEU,QAAQ,EAAE;IAAK,CAAC,GAAG,CAAC;EACzC,CAAC,CAAC;EACJ,MAAMC,OAAO,GAAGhB,QAAQ,CAAC,MAAMU,QAAQ,CAACO,KAAK,GAAG,CAAC,CAAC,CAAC;EACnD,MAAMC,WAAW,GAAGlB,QAAQ,CAAC,MAC3BgB,OAAO,CAACC,KAAK,GACT,CAACD,OAAO,CAACC,KAAK,CAACE,aAAa,CAAC,CAC1BC,MAAM,CAACJ,OAAO,CAACC,KAAK,CAACF,QAAQ,IAAI,EAAE,CAAC,CACpCM,GAAG,CAAEC,CAAC,KAAM;IACXC,IAAI,EAAEP,OAAO,CAACC,KAAK,CAACM,IAAI;IACxBC,IAAI,EAAER,OAAO,CAACC,KAAK,CAACO,IAAI;IACxB,GAAGF;EACL,CAAC,CAAC,CAAC,GACL,IAAI,CACT;EACD,MAAMG,cAAc,GAAGzB,QAAQ,CAAC,MAC9BkB,WAAW,CAACD,KAAK,GACbC,WAAW,CAACD,KAAK,CAACS,IAAI,CACpB,CAAC;IAAElB,GAAG,EAAEmB;EAAE,CAAC,KAAKnB,GAAG,CAACS,KAAK,KAAKU,CAAC,CAChC,GACD,IAAI,CACT;EAED,MAAMC,OAAO,GAAIC,IAAI,IACnBtB,MAAM,CAACuB,IAAI,CAAC;IACV,GAAGxB,KAAK;IACRG,MAAM,EAAE;MACN,GAAGH,KAAK,CAACG,MAAM;MACfoB;IACF;EACF,CAAC,CAAC;EACJ,MAAMA,IAAI,GAAG7B,QAAQ,CAAC,MACpB+B,MAAM,CAACzB,KAAK,CAACG,MAAM,CAACoB,IAAI,IAAI,CAAC,CAAC,CAC/B;EACD,MAAMG,aAAa,GAAIhB,OAAO,KAAM;IAClC,GAAGA,OAAO;IACV,GAAGA,OAAO,CAACG;EACb,CAAC,CAAC;EACF,MAAMc,QAAQ,GAAGjC,QAAQ,CACvB,MAAMa,KAAK,CAACI,KAAK,IAAIH,aAAa,CAACG,KAAK,CACzC;EACD,OAAO;IACLN,KAAK;IACLD,QAAQ;IACRE,OAAO;IACPC,KAAK,EAAEoB,QAAQ;IACff,WAAW;IACXV,GAAG;IACHiB,cAAc;IACdG,OAAO;IACPI,aAAa;IACbH;EACF,CAAC;AACH;AACA,eAAezB,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}